# yoga

[![npm version](https://img.shields.io/npm/v/generator-yoga.svg)](https://npmjs.org/package/generator-yoga) 

**yoga** is a code-less *scaffolding* system (boilerplate/starter-code generation) that makes it easier to create and maintain your own personal generator.

What makes **yoga** different?

- The logic of copying files is in the filenames themselves.
- Uses whitespace-friendly [striate](https://github.com/metaraine/striate) templating.
- Everything is powered by command-line [Inquirer](https://github.com/SBoudrias/Inquirer.js) prompts.

*(see [How it works](#how-it-works) below for details)*

Every developer should have their own personal generator so they can spin up a project that exactly fits their needs. Most importantly, you should be able to easily update your generator whenever you learn a new technology or technique.

Generators created by yoga are [yeoman](http://yeoman.io/) generators, so they can be published and consumed them like any other yeoman generator. You do not need to understand yeoman to use yoga, however, and you do not need to write any code to create and maintain your generator.

## Setup

### 1. Create your generator

Your initial generator is itself generated by yoga. You only need to do this once.

```sh
$ npm install -g yo generator-yoga  # install yeoman and generator-yoga
$ mkdir mygenerator                 # create a directory for your new generator
$ cd mygenerator                    
$ yo yoga                           # generate your personal generator
$ npm link                          # alias your generator to your globally
                                    # installed npm modules so that you can run
                                    # it with yeoman.
```

### 2. Edit your generator

- Add all your template/boilerplate files to `app/templates`. 
- Edit the [Inquirer](https://github.com/SBoudrias/Inquirer.js) prompts in `app/yoga.json`. 

Your prompts drive your generator, determining which files get copied (via [prefixnotes](https://github.com/metaraine/prefixnote)) and what code gets copied (via [striate](https://github.com/metaraine/striate), an extension of [ejs](https://github.com/mde/ejs)). You can edit these files at any time to modify your generator. 

Check out [generator-yoga-sample](https://github.com/metaraine/generator-yoga-sample) for an example yoga generator.

See [How it works](#how-it-works) below for detailed information.

### 3. Generate a project

Once you have created your generator prompts and template files, you can run your personal generator whenever you wish to create a new project.

```sh
$ yo mygenerator
? Does your project use Javascript? Yes
? Does your project use css? Yes
```

## How it works

Yoga provides a unique scaffolding and templating system that allows your entire generator to be drive by prompts in a yoga.json file.

[Inquirer](https://github.com/SBoudrias/Inquirer.js) prompts drive everything in a yoga generator.

Sample yoga.json file:

```js
{
  "prompts": [
    {
      "type": "confirm",
      "name": "js",
      "message": "Does your project use Javascript?",
      "store": true
    },
    {
      "type": "confirm",
      "name": "css",
      "message": "Does your project use css?",
      "store": true
    }
  }
}
```

The above yoga.json file would prompt you with two questions every time you run your generator and store them in `js` and `css` variables. These variables drive the main two aspects of scaffolding: file copying and templating.

### 1. File Copying

You can control which files in `/app/templates` get copied into your new project by prefixing filenames with expressions that include prompt variables.

```
.
├── index.html
├── {js}scripts
│   └── main.js
└── {css}styles
    └── main.css
```

In the above example, the scripts folder will only be copied if `js` (as declared in yoga.json) is true, and the `styles` folder will only be copied if `css` is true.

Some notes about file copying:

- Empty expressions are a great way to include system and hidden files in your templates folder without adverse effects:
  - `{}package.json`
  - `{}.gitignore`
- If a folder name only consists of an expression, all files will be copied to the parent folder:

  ```
  main.js
  {js}
    ├── 1.js
    ├── 2.js
    └── 3.js
  ```

  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇨

  ```
  main.js
  1.js
  2.js
  3.js
  ```

- Expressions can be any boolean Javascript statement:

  ```
  {js && gulp}gulpfile.js
  ```

See [prefixnote](https://github.com/metaraine/prefixnote) for the nitty-gritty.


### 2. Templating

You can use [striate](https://github.com/metaraine/striate), a superset of [ejs](https://github.com/mde/ejs), to control which code gets generated within the files. The answers given to the prompts in yoga.json are available as variables within the scope of your template files.

```html
<!DOCTYPE html>
<html>
<head>
  >> if(css) {
  <link rel='Stylesheet' type='text/css' href='styles/main.css'>
  >> }
</head>
<body>
  >> if(js) {
  <script src='scripts/main.js'></script>
  >> }
</body>
</html>
```

You can see a complete yoga generator with prompts, file prefixes, and templating at [generator-yoga-sample](https://github.com/metaraine/generator-yoga-sample).

## License

ISC © [Raine Lourie](https://github.com/metaraine)
